import { useContext } from 'react';
import { LanguageContext } from './contexts';
import type { Language } from './types';

const translations: Record<Language, Record<string, string>> = {
  en: {
    // App
    appName: "Dish Line Bill Collect",
    // Splash
    loading: "Loading...",
    // Auth
    authWelcomeTitle: "Welcome Back!",
    authWelcomeSubtitle: "Log in to continue managing your business.",
    authRegisterTitle: "Get Started",
    authRegisterSubtitle: "Create your account to start your free trial.",
    dontHaveAccount: "Don't have an account?",
    alreadyHaveAccount: "Already have an account?",
    login: "Login",
    register: "Register",
    emailOrPhone: "Email / Phone Number",
    password: "Password",
    forgotPassword: "Forgot Password?",
    forgotPasswordTitle: "Forgot Your Password?",
    forgotPasswordInstructions: "No problem. Enter your email address and we'll send you a link to reset it.",
    sendResetLink: "Send Reset Link",
    backToLogin: "Back to Login",
    resetEmailSent: "A password reset link has been sent to your email. Please check your inbox and also your spam folder.",
    userNotFound: "No user found with this email address.",
    forgotPasswordError: "Could not send reset email. Please try again.",
    fullName: "Full Name",
    companyName: "Dish Line Company Name",
    areaZone: "Select an Area",
    profilePicture: "Profile Picture (optional)",
    signupSuccess: "Signup Successful! Redirecting...",
    loginFailed: "Login failed. Please check your credentials.",
    // Home
    welcome: "Welcome",
    addCustomer: "Add Customer",
    customerList: "Customer List",
    areaWiseCustomers: "Area/Moholla-wise Customers",
    billCollection: "Bill Collection",
    dueReport: "Due Report",
    paymentHistory: "Payment History",
    smsCallReminder: "SMS / Call / Reminder",
    monthlyReports: "Monthly Reports",
    searchByName: "Search (by Name / Number / Area)",
    addAreaMoholla: "Add Area/Moholla",
    proprietor: "Proprietor",
    homeVerificationPending: "Your subscription request is being verified.",
    homeVerificationPendingSub: "Access will be granted within 24 hours.",
    // Bottom Nav
    home: "Home",
    reports: "Reports",
    customers: "Customers",
    settings: "Settings",
    // Customer Form
    customerName: "Customer Name",
    phoneNumber: "Phone Number",
    addressMoholla: "Detailed Address / House No.",
    monthlyBillAmount: "Monthly Bill Amount",
    connectionStatus: "Connection Status",
    startDate: "Start Date",
    saveCustomer: "Save Customer",
    selectAnArea: "Select an Area",
    active: "Active",
    inactive: "Inactive",
    paused: "Paused",
    openingBalance: "Initial Due Amount",
    openingBalanceHelper: "Enter any previous outstanding due amount (e.g., 500).",
    editCustomer: "Edit Customer",
    reactivationDate: "Reactivation Date (Optional)",
    reactivationDateHelper: "Set a date to remember when to reactivate this customer.",
    resumeBillingDateHelper: "To resume service, set the date from which billing should start again.",
    // Bill Collection
    collectBill: "Collect Bill",
    markAsPaid: "Mark as Paid",
    markAsDue: "Mark as Due",
    markAsAdvance: "Mark as Advance",
    paymentDate: "Payment Date",
    amount: "Amount",
    notes: "Notes (optional)",
    submitPayment: "Submit Payment",
    saveChanges: "Save Changes",
    // Reports & Dashboard
    totalCollection: "Total Collection",
    totalCustomers: "Total Customers",
    totalDue: "Total Due",
    dueByArea: "Due by Area",
    collectionThisMonth: "This Month's Collection",
    // Settings
    themeSettings: "Theme Settings",
    lightMode: "Light Mode",
    darkMode: "Dark Mode",
    languageSettings: "Language Settings",
    profilePassword: "Profile & Password",
    logout: "Logout",
    about: "About",
    madeBy: "Made by: Freelancer Hasib Ahmed",
    contactMe: "If you want to create any custom app, contact me:",
    whatsappLabel: "WhatsApp",
    whatsappNumber: "01944037444",
    loggedInAs: "Logged in as",
    changePassword: "Change Password",
    currentPassword: "Current Password",
    newPassword: "New Password",
    confirmNewPassword: "Confirm New Password",
    updatePassword: "Update Password",
    passwordMismatch: "The new passwords do not match.",
    passwordUpdateSuccess: "Password updated successfully!",
    passwordUpdateError: "Failed to update password. Please check your current password.",
    weakPassword: "Password should be at least 6 characters.",
    editProfile: "Edit Profile",
    profileUpdateSuccess: "Profile updated successfully!",
    profileUpdateError: "Failed to update profile.",
    // Customer List Filters
    searchCustomer: "Search Customers",
    searchByNameOrPhone: "Search by name or phone...",
    filterByArea: "Filter by Area",
    filterByStatus: "Filter by Status",
    allAreas: "All Areas",
    allStatuses: "All Statuses",
    // Delete Customer
    deleteCustomer: "Delete Customer",
    confirmDeleteCustomerTitle: "Confirm Customer Deletion",
    confirmDeleteCustomerMessage: "Are you sure you want to delete this customer? All associated payment history will also be permanently removed. This action cannot be undone.",
    delete: "Delete",
    cancel: "Cancel",
    // Area Management
    manageAreas: "Manage Areas",
    areaName: "Area Name",
    saveArea: "Save Area",
    areaList: "Area List",
    confirmDeleteAreaTitle: "Confirm Area Deletion",
    confirmDeleteAreaMessage: "Are you sure you want to delete this area? This cannot be undone.",
    // Due Management
    dueManagement: "Due Management",
    totalOutstandingDue: "Total Outstanding Due",
    collectDuePayment: "Collect Due Payment",
    duePaymentHistory: "Due Payment History",
    noDuePayments: "No due payments recorded.",
    confirmDeleteDuePaymentTitle: "Confirm Due Payment Deletion",
    confirmDeleteDuePaymentMessage: "Are you sure you want to delete this due payment of {amount}? The amount will be added back to the customer's outstanding due.",
    // New Billing System
    billHistory: "Bill History",
    paidOn: "Paid on",
    paid: "Paid",
    unpaid: "Unpaid",
    selectBillsToPay: "Select bills to pay",
    totalSelected: "Total Selected",
    noUnpaidBills: "No unpaid bills found.",
    monthlyDue: "Monthly Due",
    undoPayment: "Undo Payment",
    confirmUndoPaymentTitle: "Confirm Payment Reversal",
    confirmUndoPaymentMessage: "Are you sure you want to undo this payment? The bill for {monthYear} will be marked as unpaid.",
    noBillHistory: "No bill history found.",
    // General Actions & Feedback
    saving: "Saving...",
    deleting: "Deleting...",
    operationFailed: "Operation failed. Please try again.",
    customerSavedSuccess: "Customer saved successfully!",
    areaSavedSuccess: "Area saved successfully!",
    areaDeleteSuccess: "Area deleted successfully!",
    customerDeleteSuccess: "Customer deleted successfully!",
    paymentUndoSuccess: "Payment undone successfully!",
    invalidBillAmount: "Monthly bill cannot be negative.",
    // Subscription
    subscription: "Subscription",
    upgradeToPro: "Upgrade to Pro",
    lifetimeAccess: "Lifetime Access",
    yourTrialEndsIn: "Your trial ends in",
    days: "days",
    day: "day",
    yourTrialHasExpired: "Your free trial has expired!",
    unlockAllFeatures: "Unlock all features with a lifetime subscription.",
    subscribeFor: "Subscribe for ৳1000",
    lifetime: "Lifetime",
    paymentInstructions: "Payment Instructions",
    sendAmountTo: "Send ৳1000 to the bKash number below.",
    bkashNumber: "bKash Personal: 01944037444",
    thenEnterDetails: "Then enter the payment details below for verification.",
    senderPhoneNumber: "Sender bKash Number",
    transactionId: "bKash Transaction ID (TrxID)",
    submitForVerification: "Submit for Verification",
    verificationPending: "Verification Pending",
    verificationPendingMessage: "Your payment is being verified and will be activated within 24 hours. Thank you for your patience.",
    subscriptionActive: "Subscription Active",
    subscriptionActiveMessage: "You have lifetime access to all features. Thank you!",
    yourSubscriptionIs: "Your Subscription:",
    upgrade: "Upgrade",
    trialExpiredTitle: "Free Trial Expired",
    trialExpiredMessage: "Your 30-day free trial has ended. Please subscribe to continue using all features of the app.",
    subscribeNow: "Subscribe Now",
    requestSubmittedSuccess: "Your request has been submitted successfully! Please wait for verification.",
    requestSubmittedError: "Failed to submit request. Please try again.",
    featureLocked: "Feature Locked",
    free_trial: "Free Trial",
    pending: "Pending Verification",
  },
  bn: {
    // App
    appName: "ডিশ লাইন বিল সংগ্রহ",
    // Splash
    loading: "লোড হচ্ছে...",
    // Auth
    authWelcomeTitle: "স্বাগতম!",
    authWelcomeSubtitle: "আপনার ব্যবসা পরিচালনা করতে লগইন করুন।",
    authRegisterTitle: "শুরু করুন",
    authRegisterSubtitle: "আপনার ফ্রি ট্রায়াল শুরু করতে একটি অ্যাকাউন্ট তৈরি করুন।",
    dontHaveAccount: "আপনার কি অ্যাকাউন্ট নেই?",
    alreadyHaveAccount: "ইতিমধ্যে একটি অ্যাকাউন্ট আছে?",
    login: "লগইন",
    register: "নিবন্ধন",
    emailOrPhone: "ইমেল / ফোন নম্বর",
    password: "পাসওয়ার্ড",
    forgotPassword: "পাসওয়ার্ড ভুলে গেছেন?",
    forgotPasswordTitle: "পাসওয়ার্ড ভুলে গেছেন?",
    forgotPasswordInstructions: "চিন্তার কারণ নেই। আপনার ইমেল ঠিকানা দিন, আমরা আপনাকে পাসওয়ার্ড পুনরায় সেট করার জন্য একটি লিঙ্ক পাঠাব।",
    sendResetLink: "রিসেট লিঙ্ক পাঠান",
    backToLogin: "লগইনে ফিরে যান",
    resetEmailSent: "আপনার ইমেলে একটি পাসওয়ার্ড রিসেট লিঙ্ক পাঠানো হয়েছে। অনুগ্রহ করে আপনার ইনবক্স এবং স্প্যাম ফোল্ডার চেক করুন।",
    userNotFound: "এই ইমেল ঠিকানা সহ কোন ব্যবহারকারী পাওয়া যায়নি।",
    forgotPasswordError: "রিসেট ইমেল পাঠাতে முடியவில்லை। অনুগ্রহ করে আবার চেষ্টা করুন।",
    fullName: "পুরো নাম",
    companyName: "ডিশ লাইন কোম্পানির নাম",
    areaZone: "এলাকা নির্বাচন করুন",
    profilePicture: "প্রোফাইল ছবি (ঐচ্ছিক)",
    signupSuccess: "সাইনআপ সফল! আপনাকে হোমপেজে নিয়ে যাওয়া হচ্ছে...",
    loginFailed: "লগইন ব্যর্থ হয়েছে। আপনার তথ্য চেক করুন।",
    // Home
    welcome: "স্বাগতম",
    addCustomer: "গ্রাহক যোগ করুন",
    customerList: "গ্রাহকের তালিকা",
    areaWiseCustomers: "এলাকাভিত্তিক গ্রাহক",
    billCollection: "বিল সংগ্রহ",
    dueReport: "বকেয়া রিপোর্ট",
    paymentHistory: "লেনদেনের ইতিহাস",
    smsCallReminder: "এসএমএস / কল / রিমাইন্ডার",
    monthlyReports: "মাসিক রিপোর্ট",
    searchByName: "অনুসন্ধান (নাম / নম্বর / এলাকা)",
    addAreaMoholla: "এলাকা/মহল্লা যোগ করুন",
    proprietor: "স্বত্বাধিকারী",
    homeVerificationPending: "আপনার সাবস্ক্রিপশন অনুরোধ যাচাই করা হচ্ছে।",
    homeVerificationPendingSub: "২৪ ঘন্টার মধ্যে অ্যাক্সেস দেওয়া হবে।",
    // Bottom Nav
    home: "হোম",
    reports: "রিপোর্ট",
    customers: "গ্রাহক",
    settings: "সেটিংস",
    // Customer Form
    customerName: "গ্রাহকের নাম",
    phoneNumber: "ফোন নম্বর",
    addressMoholla: "বিস্তারিত ঠিকানা / বাসা নং",
    monthlyBillAmount: "মাসিক বিলের পরিমাণ",
    connectionStatus: "সংযোগ স্ট্যাটাস",
    startDate: "শুরুর তারিখ",
    saveCustomer: "গ্রাহক সংরক্ষণ করুন",
    selectAnArea: "একটি এলাকা নির্বাচন করুন",
    active: "সক্রিয়",
    inactive: "নিষ্ক্রিয়",
    paused: "সাময়িক স্থগিত",
    openingBalance: "পূর্বের বকেয়া",
    openingBalanceHelper: "আগের কোনো বকেয়া থাকলে তার পরিমাণ লিখুন (যেমন ৫০০)।",
    editCustomer: "গ্রাহকের তথ্য সম্পাদনা করুন",
    reactivationDate: "পুনরায় চালুর তারিখ (ঐচ্ছিক)",
    reactivationDateHelper: "এই গ্রাহককে কখন সক্রিয় করতে হবে তা মনে রাখার জন্য একটি তারিখ সেট করুন।",
    resumeBillingDateHelper: "পরিষেবা পুনরায় চালু করতে, যে তারিখ থেকে বিলিং আবার শুরু হবে সেই তারিখটি সেট করুন।",
    // Bill Collection
    collectBill: "বিল সংগ্রহ করুন",
    markAsPaid: "পরিশোধিত হিসাবে চিহ্নিত করুন",
    markAsDue: "বকেয়া হিসাবে চিহ্নিত করুন",
    markAsAdvance: "অগ্রিম হিসাবে চিহ্নিত করুন",
    paymentDate: "লেনদেনের তারিখ",
    amount: "পরিমাণ",
    notes: "নোট (ঐচ্ছিক)",
    submitPayment: "পেমেন্ট জমা দিন",
    saveChanges: "পরিবর্তন সংরক্ষণ করুন",
    // Reports & Dashboard
    totalCollection: "মোট সংগ্রহ",
    totalCustomers: "মোট গ্রাহক",
    totalDue: "মোট বকেয়া",
    dueByArea: "এলাকাভিত্তিক বকেয়া",
    collectionThisMonth: "এই মাসের সংগ্রহ",
    // Settings
    themeSettings: "থিম সেটিংস",
    lightMode: "লাইট মোড",
    darkMode: "ডার্ক মোড",
    languageSettings: "ভাষা সেটিংস",
    profilePassword: "প্রোফাইল ও পাসওয়ার্ড",
    logout: "লগআউট",
    about: "সম্পর্কে",
    madeBy: "নির্মাণে: ফ্রিল্যান্সার হাসিব আহমেদ",
    contactMe: "যেকোনো কাস্টম অ্যাপ তৈরি করতে আমার সাথে যোগাযোগ করুন:",
    whatsappLabel: "হোয়াটসঅ্যাপ",
    whatsappNumber: "০১৯৪৪৪৩৭৪৪৪",
    loggedInAs: "আপনি লগইন করেছেন",
    changePassword: "পাসওয়ার্ড পরিবর্তন করুন",
    currentPassword: "বর্তমান পাসওয়ার্ড",
    newPassword: "নতুন পাসওয়ার্ড",
    confirmNewPassword: "নতুন পাসওয়ার্ড নিশ্চিত করুন",
    updatePassword: "পাসওয়ার্ড আপডেট করুন",
    passwordMismatch: "নতুন পাসওয়ার্ড দুটি মিলছে না।",
    passwordUpdateSuccess: "পাসওয়ার্ড সফলভাবে আপডেট করা হয়েছে!",
    passwordUpdateError: "পাসওয়ার্ড আপডেট করতে ব্যর্থ হয়েছে। অনুগ্রহ করে আপনার বর্তমান পাসওয়ার্ড চেক করুন।",
    weakPassword: "পাসওয়ার্ড কমপক্ষে ৬ অক্ষরের হতে হবে।",
    editProfile: "প্রোফাইল সম্পাদনা করুন",
    profileUpdateSuccess: "প্রোফাইল সফলভাবে আপডেট করা হয়েছে!",
    profileUpdateError: "প্রোফাইল আপডেট করতে ব্যর্থ হয়েছে।",
    // Customer List Filters
    searchCustomer: "গ্রাহক খুঁজুন",
    searchByNameOrPhone: "নাম বা ফোন দ্বারা খুঁজুন...",
    filterByArea: "এলাকা অনুযায়ী ফিল্টার",
    filterByStatus: "স্ট্যাটাস অনুযায়ী ফিল্টার",
    allAreas: "সব এলাকা",
    allStatuses: "সব স্ট্যাটাস",
    // Delete Customer
    deleteCustomer: "গ্রাহক মুছুন",
    confirmDeleteCustomerTitle: "গ্রাহক মুছে ফেলা নিশ্চিত করুন",
    confirmDeleteCustomerMessage: "আপনি কি নিশ্চিত যে আপনি এই গ্রাহককে মুছে ফেলতে চান? সমস্ত সম্পর্কিত অর্থপ্রদানের ইতিহাসও স্থায়ীভাবে মুছে ফেলা হবে। এই কাজটি আর ফেরানো যাবে না।",
    delete: "মুছে ফেলুন",
    cancel: "বাতিল করুন",
    // Area Management
    manageAreas: "এলাকা পরিচালনা",
    areaName: "এলাকার নাম",
    saveArea: "এলাকা সংরক্ষণ করুন",
    areaList: "এলাকার তালিকা",
    confirmDeleteAreaTitle: "এলাকা মুছে ফেলা নিশ্চিত করুন",
    confirmDeleteAreaMessage: "আপনি কি নিশ্চিত যে আপনি এই এলাকাটি মুছে ফেলতে চান? এই কাজটি আর ফেরানো যাবে না।",
    // Due Management
    dueManagement: "বকেয়া পরিচালনা",
    totalOutstandingDue: "মোট বকেয়া",
    collectDuePayment: "বকেয়া সংগ্রহ করুন",
    duePaymentHistory: "বকেয়া পরিশোধের ইতিহাস",
    noDuePayments: "কোনো বকেয়া পরিশোধের রেকর্ড নেই।",
    confirmDeleteDuePaymentTitle: "বকেয়া পেমেন্ট মুছে ফেলা নিশ্চিত করুন",
    confirmDeleteDuePaymentMessage: "আপনি কি নিশ্চিত যে আপনি {amount} টাকার এই বকেয়া পেমেন্টটি মুছে ফেলতে চান? এই পরিমাণটি গ্রাহকের মোট বকেয়াতে আবার যোগ করা হবে।",
    // New Billing System
    billHistory: "বিলের ইতিহাস",
    paidOn: "পরিশোধ করা হয়েছে",
    paid: "পরিশোধিত",
    unpaid: "অপরিশোধিত",
    selectBillsToPay: "পরিশোধের জন্য বিল নির্বাচন করুন",
    totalSelected: "মোট নির্বাচিত",
    noUnpaidBills: "কোনো অপরিশোধিত বিল পাওয়া যায়নি।",
    monthlyDue: "মাসিক বকেয়া",
    undoPayment: "পেমেন্ট বাতিল করুন",
    confirmUndoPaymentTitle: "পেমেন্ট বাতিল নিশ্চিত করুন",
    confirmUndoPaymentMessage: "আপনি কি নিশ্চিত যে আপনি এই পেমেন্টটি বাতিল করতে চান? {monthYear} মাসের বিলটি অপরিশোধিত হিসাবে চিহ্নিত করা হবে।",
    noBillHistory: "কোনো বিলের ইতিহাস পাওয়া যায়নি।",
    // General Actions & Feedback
    saving: "সংরক্ষণ করা হচ্ছে...",
    deleting: "মুছে ফেলা হচ্ছে...",
    operationFailed: "কার্যক্রম ব্যর্থ হয়েছে। অনুগ্রহ করে আবার চেষ্টা করুন।",
    customerSavedSuccess: "গ্রাহক সফলভাবে সংরক্ষণ করা হয়েছে!",
    areaSavedSuccess: "এলাকা সফলভাবে সংরক্ষণ করা হয়েছে!",
    areaDeleteSuccess: "এলাকা সফলভাবে মুছে ফেলা হয়েছে!",
    customerDeleteSuccess: "গ্রাহক সফলভাবে মুছে ফেলা হয়েছে!",
    paymentUndoSuccess: "পেমেন্ট সফলভাবে বাতিল করা হয়েছে!",
    invalidBillAmount: "মাসিক বিল ঋণাত্মক হতে পারে না।",
    // Subscription
    subscription: "সাবস্ক্রিপশন",
    upgradeToPro: "প্রো ভার্সনে আপগ্রেড করুন",
    lifetimeAccess: "আজীবন অ্যাক্সেস",
    yourTrialEndsIn: "আপনার ট্রায়াল শেষ হবে",
    days: "দিন পর",
    day: "দিন পর",
    yourTrialHasExpired: "আপনার বিনামূল্যে ট্রায়াল মেয়াদ শেষ!",
    unlockAllFeatures: "আজীবন সাবস্ক্রিপশনের মাধ্যমে সমস্ত ফিচার আনলক করুন।",
    subscribeFor: "৳১০০০ দিয়ে সাবস্ক্রাইব করুন",
    lifetime: "আজীবন",
    paymentInstructions: "পেমেন্ট করার নিয়মাবলী",
    sendAmountTo: "নিচের বিকাশ নম্বরে ৳১০০০ পাঠান।",
    bkashNumber: "বিকাশ পার্সোনাল: ০১৯৪৪৪৩৭৪৪৪",
    thenEnterDetails: "তারপর যাচাইয়ের জন্য নিচের পেমেন্টের বিবরণ দিন।",
    senderPhoneNumber: " প্রেরকের বিকাশ নম্বর",
    transactionId: "বিকাশ লেনদেন আইডি (TrxID)",
    submitForVerification: "যাচাইয়ের জন্য জমা দিন",
    verificationPending: "যাচাই প্রক্রিয়াধীন",
    verificationPendingMessage: "আপনার পেমেন্ট যাচাই করা হচ্ছে এবং ২৪ ঘন্টার মধ্যে সক্রিয় করা হবে। আপনার ধৈর্যের জন্য ধন্যবাদ।",
    subscriptionActive: "সাবস্ক্রিপশন সক্রিয়",
    subscriptionActiveMessage: "আপনি সব ফিচারের আজীবন অ্যাক্সেস পেয়েছেন। ধন্যবাদ!",
    yourSubscriptionIs: "আপনার সাবস্ক্রিপশন:",
    upgrade: "আপগ্রেড",
    trialExpiredTitle: "ফ্রি ট্রায়াল মেয়াদ শেষ",
    trialExpiredMessage: "আপনার ৩০ দিনের ফ্রি ট্রায়াল শেষ হয়েছে। অ্যাপের সমস্ত ফিচার ব্যবহার চালিয়ে যেতে দয়া করে সাবস্ক্রাইব করুন।",
    subscribeNow: "এখনই সাবস্ক্রাইব করুন",
    requestSubmittedSuccess: "আপনার অনুরোধ সফলভাবে জমা দেওয়া হয়েছে! দয়া করে যাচাইয়ের জন্য অপেক্ষা করুন।",
    requestSubmittedError: "অনুরোধ জমা দিতে ব্যর্থ হয়েছে। অনুগ্রহ করে আবার চেষ্টা করুন।",
    featureLocked: "ফিচারটি লক করা আছে",
    free_trial: "ফ্রি ট্রায়াল",
    pending: "যাচাইয়ের অপেক্ষায়",
  }
};

export const useTranslation = () => {
    const context = useContext(LanguageContext);
    if (!context) {
        throw new Error('useTranslation must be used within a LanguageProvider');
    }
    const { language } = context;
    
    const t = (key: keyof typeof translations.en, params: Record<string, string> = {}): string => {
        let translation = translations[language][key] || translations.en[key];
        Object.keys(params).forEach(paramKey => {
            translation = translation.replace(`{${paramKey}}`, params[paramKey]);
        });
        return translation;
    };

    return { t, language: context.language, setLanguage: context.setLanguage };
};